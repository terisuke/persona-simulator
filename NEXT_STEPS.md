# 🚀 次のステップ - Persona Debate Simulator

## ✅ 完了した作業

MVPの実装がすべて完了しました！以下の機能が利用可能です：

1. ✅ Xアカウントの投稿取得（Grok API）
2. ✅ ペルソナ生成（口調・性格模倣）
3. ✅ 議論シミュレーション（引用付き）
4. ✅ 10アカウント対応UI
5. ✅ 類似投稿検索
6. ✅ 口調模倣検証
7. ✅ キャッシュ機能
8. ✅ エラーハンドリング

## 🔧 起動前の最終チェック

### 1. Grok APIキーの設定

`.streamlit/secrets.toml`ファイルを開いて、**実際のGrok APIキー**に置き換えてください：

```toml
GROK_API_KEY = "xai-YOUR_ACTUAL_GROK_API_KEY_HERE"
```

**APIキーの取得方法**:
1. [https://x.ai/api](https://x.ai/api) にアクセス
2. アカウントでログイン
3. APIキーを生成
4. キーをコピーして上記ファイルに貼り付け

### 2. アプリケーションの起動

ターミナルで以下のコマンドを実行：

```bash
cd /Users/teradakousuke/Developer/persona-simulator
streamlit run app.py
```

ブラウザが自動的に開き、`http://localhost:8501`でアプリが表示されます。

### 3. 動作テスト

#### テストシナリオ1: 単一アカウント

1. サイドバーのアカウント入力: `cor_terisuke`
2. トピック入力: "AIの倫理的課題について"
3. 「議論を生成」をクリック
4. 期待結果:
   - ペルソナの意見が表示される
   - 口調模倣スコアが80%以上
   - 引用投稿が3件表示される

#### テストシナリオ2: 複数アカウント

1. 「分析するアカウント数」を3に変更
2. アカウント入力:
   - アカウント1: `cor_terisuke`
   - アカウント2: （他のXアカウント）
   - アカウント3: （他のXアカウント）
3. 同じトピックで生成
4. 期待結果: 3つのペルソナの意見が並んで表示

## 📊 使用例トピック

以下のトピックで試してみてください：

1. **テクノロジー系**
   - "AIの倫理的課題について"
   - "リモートワークの未来"
   - "Web3とブロックチェーンの可能性"

2. **ビジネス系**
   - "起業家に必要なスキル"
   - "データサイエンティストのキャリアパス"
   - "スタートアップの資金調達戦略"

3. **クリエイティブ系**
   - "音楽とテクノロジーの融合"
   - "AIによるアート生成の是非"
   - "クリエイターエコノミーの未来"

## 🐛 トラブルシューティング

### 問題1: "Grok APIキーが設定されていません"

**解決策**:
```bash
# secrets.tomlが存在するか確認
ls -la .streamlit/secrets.toml

# 存在しない場合はコピー
cp .streamlit/secrets.toml.example .streamlit/secrets.toml

# エディタで開いて実際のAPIキーを入力
```

### 問題2: "投稿が取得できませんでした"

**原因**:
- APIキーが無効
- アカウント名が間違っている
- Grok APIのエンドポイントが異なる

**解決策**:
1. APIキーを再確認
2. アカウント名を`@`なしで入力（例: `cor_terisuke`）
3. Grok APIの公式ドキュメントでエンドポイントを確認し、`utils/grok_api.py`の`BASE_URL`を調整

### 問題3: モデルのダウンロードが遅い

初回起動時は、sentence-transformersモデル（約400MB）がダウンロードされます。
これは**一度だけ**で、次回からは高速です。

Wi-Fi環境で実行することをおすすめします。

## 📈 データの確認

### キャッシュデータ

投稿データは`.cache/`ディレクトリに保存されます：

```bash
# キャッシュの確認
ls -la .cache/

# キャッシュのクリア
rm -rf .cache/
```

### ログの確認

アプリの実行ログはターミナルに表示されます。詳細なデバッグには：

```python
# app.pyの冒頭で変更
logging.basicConfig(
    level=logging.DEBUG,  # INFO → DEBUGに変更
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'
)
```

## 🎯 次の改善提案

### 短期（1週間以内）

1. **実際のXアカウントでテスト**
   - @cor_terisukeを含む3-5アカウント
   - 様々なトピックで検証
   - 口調模倣の精度を確認

2. **プロンプトの微調整**
   - `utils/grok_api.py`の`generate_debate_opinion`メソッド
   - より自然な口調になるようプロンプトを調整

3. **UIの改善**
   - より見やすいレイアウト
   - エラーメッセージの改善

### 中期（2週間〜1ヶ月）

1. **複数ターン議論**
   - ペルソナ間の対話形式
   - 意見の応酬をシミュレート

2. **可視化機能**
   - ペルソナの意見を図で比較
   - 投稿の時系列グラフ

3. **カスタマイズ**
   - プロンプトテンプレートの編集機能
   - 投稿取得数の調整

### 長期（1ヶ月以上）

1. **データベース統合**
   - PostgreSQL/SQLiteで投稿を永続化
   - 履歴管理機能

2. **API拡張**
   - REST API提供
   - 外部ツールとの連携

3. **多言語対応**
   - 英語、韓国語などの投稿にも対応

## 📚 参考ドキュメント

- `README.md` - プロジェクト全体の説明
- `QUICKSTART.md` - 詳細なセットアップガイド
- `PROJECT_SUMMARY.md` - 実装の詳細
- `test_setup.py` - セットアップテストスクリプト

## 🎉 準備完了！

すべての準備が整いました。以下のコマンドでアプリを起動して、素晴らしい議論シミュレーションを体験してください！

```bash
streamlit run app.py
```

Happy Coding! 💬✨

